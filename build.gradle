plugins {
    id 'cpp-application'
    id 'cpp-unit-test'
}

repositories {
    maven {
        url 'https://repo.gradle.org/gradle/libs-snapshots-local/'
    }
}

unitTest {
    dependencies {
        implementation 'org.gradle.cpp-samples:googletest:1.9.0-gr4-SNAPSHOT'
    }

    binaries.whenElementKnown(CppTestExecutable) { binary ->
        if (binary.targetMachine.operatingSystemFamily.linux) {
            binary.linkTask.get().linkerArgs.add('-pthread')
        }
    }
}

